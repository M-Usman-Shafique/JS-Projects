<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Day#7</title>
  </head>
  <body>
    <script>
      //   function asyncFunc() {
      //     console.log("Hello");
      //     setTimeout(() => {
      //         console.log("Usman")
      //     }, 0);
      //     console.log("My name is");
      //   }

      //   asyncFunc();

      // --------- Artificially Created Promise -------- //

      let prom = new Promise((resolve, reject) => {
        console.log("Promise is pending...");
        setTimeout(() => {
          const success = Math.random() > 0.5;
          if (success) {
            resolve("Promise succeeded...");
          } else {
            reject(new Error("Promise failed..."));
          }
        }, 0);
      });

      //------- Handling Promise using .then() -------//

      // prom
      //   .then((result) => console.log(result))
      //   .catch((error) => console.error("Error:", error.message));

      // --------- Handling Promise using async await ------- //

      async function promiseHandler() {
        try {
          const result = await prom;
          console.log(result);
        } catch (error) {
          console.error("Error:", error.message);
        }
      }

      promiseHandler();

      // ------- Promise Response ------- //

      //   function Fetch() {
      //     const fetchData = fetch("https://jsonplaceholder.typicode.com/users");
      //     fetchData
      //       .then((response) => {
      //         return response.json();
      //       })
      //       .then((users) => {
      //         users.map((user) => console.log(user.name));
      //       });
      //   }

      //   let count = 0;
      //   const timer = setInterval(() => {
      //     Fetch();
      //     count++;
      //     console.log(count)

      //     if (count > 2) {
      //       clearInterval(timer);
      //       console.log(`Data fetched ${count} times`)
      //     }
      //   }, 2000);

      // ----------- async await --------- //

      // async function Fetch() {
      //     const response = await fetch("https://jsonplaceholder.typicode.com/users")
      //     let users  = await response.json();
      //     users.map(user => console.log(user.name))
      // }

      // Fetch();

      // ------- Promise Chaining ------- //
      // function Chain() {
      //   const fetchData = fetch("https://jsonplaceholder.typicode.com/users");
      //   fetchData
      //     .then((response) => response.json())
      //     .then((users) => users.filter((user) => user.id % 2 === 0))
      //     .then((filteredUsers) =>
      //       filteredUsers.map((filteredUser) => console.log(filteredUser.name))
      //     )
      //     .then((message) => console.warn("All Chaining Done"))
      // }

      // Chain();

      // ------ async await ----- //
      // async function asyncFunc() {
      //   const response = await fetch(
      //     "https://jsonplaceholder.typicode.com/users"
      //   );
      //   const users = await response.json();
      //   let filteredUsers = users.filter((user) => user.id % 2 === 0);
      //   filteredUsers.map((filteredUser) => console.log(filteredUser.name));
      //   console.warn("Chaining problem eradicated.");
      // }

      // asyncFunc();

      // ------- Parallel Promises ------- //
      const urls = [
        "https://jsonplaceholder.typicode.com/users/1",
        "https://jsonplaceholder.typicode.com/users/2",
        "https://jsonplaceholder.typicode.com/users/3",
      ];
      // function Parallel() {
      //   const fetchPromises = urls.map((url) =>
      //     fetch(url).then((response) => response.json())
      //   );
      //   return Promise.all(fetchPromises)
      //     .then((users) => users) // returning users
      // }

      // Parallel().then(users => users.map(user => console.log(user.name)))
      // .then(message => console.warn("Parallel promises done"))

      // ------- async await Parallel promises ------- //
      // async function asyncFunc() {
      //   const fetchPromises = urls.map(async (url) => {
      //     const response = await fetch(url);
      //     return response.json();
      //   });
      //   const users = await Promise.all(fetchPromises);
      //   return users;
      // }

      // (async function () {
      //   const users = await asyncFunc();
      //   users.map((user) => console.log(user.name));
      // })();
    </script>
  </body>
</html>
